18:59:47	 From Михаил Новиков (куратор) : 5 мин. Ждем Олега Агапова.
19:09:25	 From Дмитрий : как все же просматривать логи при отладке 4 лабы, делал по сути вслепую ? Запускаешь, что-то ломается, а как понять что же случилось не понятно. В Jupiter ничего не выводится. Я так понимаю у многих была подобная проблема. На курсе DE на Scala было куда понятнее.
19:11:09	 From Юлия Семеновых : Можно посмотреть sq.status, где sq - это sink
19:13:11	 From Дмитрий : да, когда стриминг идёт
19:14:30	 From Александр Седых : Как подключить консоль к jupiter
19:18:18	 From Sergey Polyakhov : /usr/hdp/current/kafka-broker/bin/kafka-console-consumer.sh --bootstrap-server spark-master-1.newprolab.com:6667 --topic mikhail.novikov --from-beginning
/usr/hdp/current/kafka-broker/bin/kafka-console-consumer.sh --bootstrap-server spark-master-1.newprolab.com:6667 --topic input_mikhail.novikov --from-beginning
19:18:46	 From Sergey Polyakhov : вот эти команды из слака помогли читать топики
19:22:12	 From Михаил Новиков (куратор) : https://github.com/newprolab/sber-spark-ds-5/blob/master/labs/solutions/lab04_Andrey_kachetov.ipynb
19:40:19	 From nikita r : https://medium.com/@nutanbhogendrasharma/feature-transformer-vectorassembler-in-pyspark-ml-feature-part-3-b3c2c3c93ee9 тут есть пример когда передают 2 колонки в каждой из кторых массив в ВекторАссемблер и он склеивает их в один flatten массив
19:41:07	 From Ефимов Илья : Спасибо
20:07:34	 From Ефимов Илья : Как можно поменять размер бача?
20:12:05	 From Александр Седых : Вопрос по первой части. Была использована схема с раздельным прогнозов возраста и пола. Как измениться точность, если объединить возраст и пол, и делать прогноз по одной объединённой колонке?
20:12:55	 From Михаил Новиков (куратор) : Упадет точность
20:14:31	 From Михаил Новиков (куратор) : чем меньше категорий - тем лучше в виду того что проще классифицировать.
20:15:09	 From Kuznetsov-AlexV : не уверен
20:15:45	 From Юлия Семеновых : Я думаю, надо просто по-другому подтянуть алгоритм
20:15:50	 From Юлия Семеновых : потюнить
20:17:04	 From Юлия Семеновых : Делала как раз с объединенным таргетом, точность была небольшая, но я не особо настраивала и не сравнивала
20:17:51	 From Александр Седых : Как точность получилось?
20:18:11	 From Михаил Новиков (куратор) : 0,27
20:18:43	 From Михаил Новиков (куратор) : accuracy: 0.261
20:19:14	 From Ефимов Илья : sq = kafka_sdf
    .select(doc.alias("value"))
    .writeStream.format("kafka")
    .options(**write_kafka_params)\
    .option('checkpointLocation', 'streaming/chk/chk_kafka_ilya_efimov_lab04')\
    .outputMode("append").start()
sq.status
20:19:31	 From Юлия Семеновых : У меня получилась точность 0.2512 на объединенном таргете (по чекеру)
20:20:03	 From Александр Седых : Отличается
20:20:25	 From Александр Седых : При этом варианте у меня ругалось на группирову
20:20:30	 From Юлия Семеновых : Ну так надо сравнивать с одинаковой предобработкой
20:21:51	 From Юлия Семеновых : Ту же много чего можно поменять
20:22:19	 From Юлия Семеновых : *тут
20:25:19	 From Sergey Polyakhov : а можете запустить чекер и проверить? я похожее делал и была ошибка
20:27:21	 From Александр Седых : Скорее всего нужен будет триггер
20:28:38	 From Sergey Polyakhov :   а без awaitTermination будет стриминг продолжать работать? 
20:29:17	 From Sergey Polyakhov : или обработает первую часть и выключиться?
20:29:25	 From Ефимов Илья : write_kafka_params = {
   "kafka.bootstrap.servers": 'spark-master-1.newprolab.com:6667',
   "topic": "ilya.efimov"
}
20:30:54	 From Ефимов Илья : Какой процент учащихся сдал 4 лабу? ))
20:32:55	 From Михаил Новиков (куратор) : 39 человек  из 86   или  42%
20:36:19	 From Ефимов Илья : Кстати, для решения лабы можно  было  обойтись и без стрим режима, обычная запись успевала залить в топик, пока работает чекер.
20:37:44	 From Kuznetsov-AlexV : магия
21:17:35	 From Sergey Polyakhov : а почему берем 2-е число ,а не первое?
21:18:26	 From Михаил Новиков (куратор) : нам надо предсказать вероятность таргета  со значением 1
21:18:30	 From nikita r : Вероятность 1ого класса потому что нам нужно. Первое число - вероятность класса 0, второе - класса 1 (был отток)
21:19:37	 From Sergey Polyakhov : понял,спасибо
21:23:16	 From Юлия Семеновых : По поводу разницы между rawPrediction и probability. Насколько я поняла, rawPrediction - это сырой выход модели, степень уверенности в принадлежности к классам, а probablity - это условная вероятность (откалиброванная величина). То есть для логрег они должны совпадать, а для RF, например, будут разные.
21:23:42	 From Юлия Семеновых : Если я не права, поправьте, кто знает. Но вроде по докам так.
21:28:46	 From Kuznetsov-AlexV : для logreg не совпадают
21:29:30	 From Юлия Семеновых : А сильно отличаются?
21:30:19	 From Kuznetsov-AlexV : не вероятности, могут быть отрицательные
21:30:32	 From Kuznetsov-AlexV : python
21:30:45	 From Ефимов Илья : python
21:31:04	 From Юлия Семеновых : Probability отрицательные? странно
21:31:50	 From Kuznetsov-AlexV : rawPred отрицательные
21:32:13	 From Юлия Семеновых : Ну так я и говорю, что это не вероятности. А probability должны быть вероятности
21:32:55	 From Kuznetsov-AlexV : это я про logreg
21:33:58	 From Юлия Семеновых : А, в смысле что они разные там? Ну надо погуглить, что в спарке означают отрицательные прогнозы
21:34:10	 From Юлия Семеновых : Не знаю почему так
21:35:06	 From Kuznetsov-AlexV : а сколько такой курс стоит извне?\
21:35:21	 From Kuznetsov-AlexV : ок)
21:35:34	 From nikita r : 86000руб вроде
21:35:48	 From Kuznetsov-AlexV : спасибо!
21:35:49	 From Sergey Polyakhov : спасибо
